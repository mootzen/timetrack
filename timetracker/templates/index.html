<!DOCTYPE html>
<html lang="en" data-theme="{{ 'dark' if session.get('dark_mode') else 'light' }}">
<head>
    <link rel="icon" type="image/x-icon" href="static/favicon.ico">
    <style>
      .logo-container {
          text-align: center;
          margin-top: 20px;
      }
      .logo-container img {
          height: 120px;
          max-width: 90%;
      }
    </style>
    <meta charset="UTF-8">
    <title>Uhrensohn</title>
    <link rel="stylesheet" href="/static/style.css">
    <script>
        let startTime = "{{ start_time }}";
        let elapsedTime = "{{ elapsed }}";
        function updateElapsed() {
            const start = new Date(startTime);
            const now = new Date();
            const diff = new Date(now - start);
            const hrs = String(diff.getUTCHours()).padStart(2, '0');
            const mins = String(diff.getUTCMinutes()).padStart(2, '0');
            const secs = String(diff.getUTCSeconds()).padStart(2, '0');
            document.getElementById('elapsed').textContent = `${hrs}:${mins}:${secs}`;
        }
        setInterval(updateElapsed, 1000);
    </script>
</head>
<body>
    <div class="container">
        <h1>⏱️ Uhrensohn - AZ-Erfassung</h1>
        <form action="/start" method="post"><button class="button">▶️ Start</button></form>
        <form action="/stop" method="post"><button class="button">⏹️ Stop</button></form>
        <form action="/logout" method="post"><button class="button">🚪 Logout</button></form>
        <a href="/history" class="link">📜 History</a>
        <a href="/settings" class="link">⚙️ Settings</a>

        {% if status %}
        <div class="status">
            <p><strong>Status:</strong> {{ status }}</p>
            {% if start_time %}
            <p><strong>Start Time:</strong> {{ start_time }}</p>
            {% endif %}
            {% if elapsed %}
            <p><strong>Elapsed:</strong> <span id="elapsed">{{ elapsed }}</span></p>
            {% endif %}
        </div>
        {% endif %}

        <div class="summary">
            <h2>📈 Progress</h2>
            <p><strong>Worked today:</strong> {{ worked_today }} / {{ expected_today }} ({{ percent_today }}%)</p>
            <p><strong>Worked this week:</strong> {{ worked_week }} / {{ expected_week }} ({{ percent_week }}%)</p>
        </div>
    </div>
</body>
</html>
